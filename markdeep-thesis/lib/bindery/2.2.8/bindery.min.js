/* ðŸ“– Bindery v2.2.7 */var Bindery=function(){'use strict';function e(e,r){return L(".error",[L(".error-title",e),L(".error-text",r),L(".error-footer",`Bindery ${t}`)])}const t="v2.2.7",r=e=>`${"\uD83D\uDCD6-"}${e}`,n=e=>`.${r(e)}`,o=e=>"."===e[0]?n(e.substr(1)):r(e),a=1,i=2,d=3,l=4,s=5,p=6,g=7;var h=Object.freeze({AUTO:a,AUTO_BLEED:i,AUTO_MARKS:d,LETTER_PORTRAIT:l,LETTER_LANDSCAPE:s,A4_PORTRAIT:p,A4_LANDSCAPE:g});const m=2,u=3;var f=Object.freeze({FLIPBOOK:1,PREVIEW:m,PRINT:u});const b=1,w=2,k=3;var y=Object.freeze({PAGES:1,BOOKLET:k,SPREADS:w});const v=2,P=3,E=4;var x=Object.freeze({NONE:1,CROP:v,BLEED:P,BOTH:E});const C={showBleed:"show-bleed",showCrop:"show-crop",showBleedMarks:"show-bleed-marks",isViewing:"viewing",viewPreview:"view-preview",viewPrint:"view-print",viewFlip:"view-flip",inProgress:"in-progress",leftPage:"left",rightPage:"right",isOverflowing:"is-overflowing",printSheet:"print-sheet",sheetSpread:"print-sheet-spread",sheetLeft:"print-sheet-left",sheetRight:"print-sheet-right",toNext:"continues",fromPrev:"continuation"};Object.keys(C).forEach(e=>{const t=C[e];C[e]=o(t)}),C.allModes=[C.viewPreview,C.viewPrint,C.viewFlip],C[m]=C.viewPreview,C[u]=C.viewPrint,C[1]=C.viewFlip;const S=window.document,L=(e,t=[])=>{const r=S.createElement("div");return r.className=e.split(".").filter(e=>""!==e).map(o).join(" "),"string"==typeof t?r.textContent=t:Array.isArray(t)&&t.forEach(e=>r.appendChild(e)),r},z=(e,t)=>{if(e.parentNode)return t();let r=document.querySelector(o(".measure-area"));r||(r=document.body.appendChild(L("measure-area"))),r.firstElementChild!==e&&(r.innerHTML="",r.appendChild(e));const n=t();return n},R=window.document,O=e=>{const t=R.createElement("style");return t.id=e,R.head.appendChild(t),t},A=e=>R.querySelector(`#${e}`)||O(e),N=(e,t)=>{const r=R.createElement("div");return r.innerHTML=e,r.querySelector(t)},B=o,c=/^([+-]?[0-9]+(.?[0-9]+)?)(px|in|cm|mm|pt|pc)$/,M=e=>c.test(e),F=e=>{if(!M(e))throw Error(`Cannot parse css length from "${e}"`);const t=e.match(c);return{val:+t[1],unit:t[3]}};var H={bleed:"12pt",size:{width:"4in",height:"6in"},margin:{inner:"24pt",outer:"24pt",bottom:"40pt",top:"48pt"}};const I=Object.freeze({width:"8.5in",height:"11in"}),V=Object.freeze({width:"210mm",height:"297mm"}),j=!!window.chrome;class D{constructor(e={},t={}){this.size=e.size||H.size,this.margin=e.margin||H.margin,this.markLength="12pt",this.paper=j?t.paper||a:d,this.bleed=t.bleed||H.bleed,this.printTwoUp=t.layout&&t.layout!==b}get displaySize(){const e=this.printTwoUp?this.spreadSize.width:this.size.width,t=this.size.height,r=this.bleed;return{width:e,height:t,bleed:r}}get sheetSize(){const e=this.printTwoUp?this.spreadSize.width:this.size.width,t=this.size.height,r=`2 * ${this.bleed}`,n=`${r} + 2 * ${this.markLength}`,o=`${this.bleed} + ${this.markLength}`;switch(this.paper){case a:return{width:e,height:t};case i:return{width:`calc(${e} + ${this.printTwoUp?r:this.bleed})`,height:`calc(${t} + ${r})`};case d:return{width:`calc(${e} + ${this.printTwoUp?n:o})`,height:`calc(${t} + ${n})`};case s:return{width:I.height,height:I.width};case l:return I;case p:return V;case g:return{width:V.height,height:V.width};default:}return{width:e,height:t}}get spreadSize(){const e=F(this.size.width);return{height:this.size.height,width:`${2*e.val}${e.unit}`}}updateStyleVars(){const e=this.size,t=this.sheetSize,r={"spread-width":this.spreadSize.width,"page-width":e.width,"page-height":e.height,"sheet-width":t.width,"sheet-height":t.height,"margin-inner":this.margin.inner,"margin-outer":this.margin.outer,"margin-top":this.margin.top,"margin-bottom":this.margin.bottom,bleed:this.bleed,"mark-length":this.markLength},n=Object.keys(r).map(e=>`--bindery-${e}: ${r[e]};`).join(""),o=`@page { size: ${t.width} ${t.height}; }`;A("binderyPage").innerHTML=`${`:root { ${n} }`} ${o}`}}class U{constructor(e){this.name=e.name?e.name:"Unnamed Bindery Rule",this.selector="",Object.keys(e).forEach(t=>{this[t]=e[t]})}}const q=(e,t)=>{if(!t)throw Error("Valid options not specified");return Object.keys(e).forEach(r=>{if(!t[r]){const e=t.name?`'${t.name}'`:"This option";throw Error(`Unknown option in ${e}: '${r}'`)}const n=e[r],o=t[r];if(!o.check(n)){const e=t.name?`${t.name}.${r}`:r;throw Error(`Invalid value for '${e}': ${JSON.stringify(n)} is not a ${o.name}.`)}}),!0},W=e=>"object"==typeof e,_=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),Y=(e,t)=>{const r=Object.keys(t).filter(e=>"name"!==e);return!r.some(t=>!_(e,t))},K=e=>t=>W(t)&&q(t,e),G=e=>t=>W(t)&&Y(t,e)&&q(t,e),X=e=>t=>e.includes(t),Q={any:{name:"any",check:()=>!0},enum(...e){return{name:`(${e.map(e=>`"${e}"`).join(" | ")})`,check:X(e)}},shapeExact:e=>({name:`exactly ({${Object.keys(e).join(", ")}})`,check:G(e)}),shape:e=>({name:`shape ({${Object.keys(e).join(", ")}})`,check:K(e)}),string:{name:"string",check:e=>"string"==typeof e},length:{name:"length (string with absolute units)",check:M},number:{name:"number",check:e=>"number"==typeof e},bool:{name:"bool",check:e=>"boolean"==typeof e},func:{name:"func",check:e=>"function"==typeof e},obj:{name:"object",check:W},array:{name:"array",check:e=>Array.isArray(e)}};Q.margin={name:"margin ({ top, inner, outer, bottom })",check:G({name:"margin",top:Q.length,inner:Q.length,outer:Q.length,bottom:Q.length})},Q.size={name:"size ({ width, height })",check:G({name:"size",width:Q.length,height:Q.length})};class T extends U{constructor(e){super(e),this.selector="*",this.counterValue=0,q(e,{name:"Counter",replaceEl:Q.string,resetEl:Q.string,incrementEl:Q.string,replace:Q.func})}setup(){this.counterValue=0}beforeAdd(e){return e.matches(this.incrementEl)&&(this.counterValue+=1),e.matches(this.resetEl)&&(this.counterValue=0),e.matches(this.replaceEl)?this.createReplacement(e):e}createReplacement(e){return this.replace(e,this.counterValue)}replace(e,t){return e.textContent=t,e}}class Z extends U{constructor(e){super(e),this.name="Out of Flow"}beforeAdd(e){return e.setAttribute("data-ignore-overflow",!0),e}afterAdd(e,t,r,n){return this.createOutOfFlowPages(e,t,n),("same"!==this.continue||t.currentPage.hasOutOfFlowContent)&&(r(!0),("left"===this.continue||"right"===this.continue)&&t.currentPage.setPreference(this.continue)),e}}class $ extends Z{constructor(e){e.continue=e.continue||"same",e.rotate=e.rotate||"none",super(e),q(e,{name:"FullBleedSpread",selector:Q.string,continue:Q.enum("next","same","left","right"),rotate:Q.enum("none","clockwise","counterclockwise")})}createOutOfFlowPages(e,t,r){e.parentNode.removeChild(e);let n;t.currentPage.isEmpty?n=t.currentPage:(n=r(),t.addPage(n));const o=r();t.addPage(o),"none"!==this.rotate&&[n,o].forEach(e=>{const t=L(`.rotate-container.spread-size-rotated.rotate-spread-${this.rotate}`);t.appendChild(e.background),e.element.appendChild(t)}),n.background.appendChild(e),n.element.classList.add(B("spread")),n.setPreference("left"),n.isOutOfFlow="same"===this.continue,n.avoidReorder=!0,n.hasOutOfFlowContent=!0,o.background.appendChild(e.cloneNode(!0)),o.element.classList.add(B("spread")),o.setPreference("right"),o.isOutOfFlow="same"===this.continue,o.avoidReorder=!0,o.hasOutOfFlowContent=!0}}class J extends Z{constructor(e){e.continue=e.continue||"same",e.rotate=e.rotate||"none",super(e),q(e,{name:"FullBleedPage",selector:Q.string,continue:Q.enum("next","same","left","right"),rotate:Q.enum("none","inward","outward","clockwise","counterclockwise")})}createOutOfFlowPages(e,t,r){e.parentNode.removeChild(e);let n;if(t.currentPage.isEmpty?n=t.currentPage:(n=r(),t.addPage(n)),"none"!==this.rotate){const e=L(`.rotate-container.page-size-rotated.rotate-${this.rotate}`);e.appendChild(n.background),n.element.appendChild(e)}n.background.appendChild(e),n.hasOutOfFlowContent=!0}}class ee extends U{constructor(e){super(e),this.name="Replace"}afterAdd(e,t,r,n,o){const a=e.parentNode;if(!a)throw console.error(e),Error(`Bindery.Replace({ selector: '${this.selector}' }).afterAdd called on element that hasn't been added.`);const i=e.cloneNode(!0),d=this.createReplacement(t,i);return a.replaceChild(d,e),t.currentPage.hasOverflowed()?(a.replaceChild(e,d),o(e)):d}createReplacement(e,t){return this.replace(t)}replace(e){return e.insertAdjacentHTML("beforeEnd","<sup class=\"bindery-sup\">Default Replacement</sup>"),e}}class te extends ee{constructor(e){super(e),q(e,{name:"Footnote",selector:Q.string,replace:Q.func,render:Q.func})}afterAdd(e,t,r,n,o){const a=t.currentPage.footer.children.length+1,i=L(".footnote"),d=this.render(e,a);return d instanceof HTMLElement?i.appendChild(d):i.innerHTML=d,t.currentPage.footer.appendChild(i),super.afterAdd(e,t,r,n,e=>(t.currentPage.footer.removeChild(i),o(e)))}createReplacement(e,t){const r=e.currentPage.footer.children.length;return this.replace(t,r)}replace(e,t){return e.insertAdjacentHTML("beforeEnd",`<sup class="bindery-sup">${t}</sup>`),e}render(e,t){return`<sup>${t}</sup> Default footnote (<a href='/bindery/docs/#footnote'>Learn how to change it</a>)`}}const re=(e,t)=>e.filter(e=>e.number&&t(e.element)).map(e=>e.number),ne=e=>{let t="",r=e[0],n=!1;const o=e=>{t+=`${e}`},a=()=>{n=!0},i=e=>{n=!1,t+=`â€“${e}`},d=e=>{t+=`, ${e}`},l=(e,t)=>{i(e),d(t)},s=(e,t)=>{t?i(e):n&&!t?l(r,e):d(e)};return e.forEach((t,p)=>{const i=p===e.length-1,c=t===r+1;0===p?o(t):i?s(t,c):c?a():n&&!c?l(r,t):d(t),r=t}),t},oe=(e,t)=>{if(e===t)return!0;if(!e||!t)return!1;const r=e.length;if(t.length!==r)return!1;for(let n=0;n<r;n+=1)if(e[n]!==t[n])return!1;return!0},ae=e=>{let t,r=!1;const n=o=>r?void(t=o):void(r=!0,o(),setTimeout(()=>{if(r=!1,t){const e=t;t=null,n(e)}},e));return n},ie=e=>2<e.length&&"#"===e[0]&&/^\d+$/.test(e[1]),de=e=>ie(e)?`[id="${e.replace("#","")}"]`:e;class le extends ee{constructor(e){super(e),q(e,{name:"PageReference",selector:Q.string,replace:Q.func,createTest:Q.func}),this.references=[];const t=ae(10);this.throttledUpdate=e=>{t(()=>this.updatePageReferences(e.pages))}}eachPage(e,t){this.throttledUpdate(t)}afterAdd(e,t){const r=this.createTest(e);if(!r)return e;const n=this.createReference(t,r,e);return n.element}createReference(e,t,r){const n={test:t,template:r,element:r,value:null};n.render=e=>this.render(n,e),this.references.push(n);const o=re(e.pages,t);return n.render(o),n}render(e,t){if(!t||oe(e.value,t))return;if(!Array.isArray(t))throw Error("Page search returned unexpected result");const r=0<t.length,n=r?ne(t):"\u2327",o=e.template.cloneNode(!0),a=this.replace(o,n);r||a.classList.add(B("placeholder-num")),e.element.parentNode.replaceChild(a,e.element),e.element=a,e.value=t}createTest(e){const t=e.getAttribute("href");if(!t)return null;const r=de(t);return e=>e.querySelector(r)}updatePageReferences(e){const t=this.references.map(t=>({ref:t,data:re(e,t.test)}));t.forEach(({ref:e,data:t})=>this.render(e,t))}replace(e,t){return e.insertAdjacentHTML("beforeend",`, <span>${t}</span>`),e}}class se extends U{constructor(e){e.position=e.position||"before",e.continue=e.continue||"next",super(e),q(e,{name:"PageBreak",selector:Q.string,continue:Q.enum("next","left","right"),position:Q.enum("before","after","both","avoid")})}get avoidSplit(){return"avoid"===this.position}beforeAdd(e,t,r){return("before"===this.position||"both"===this.position)&&(!t.currentPage.isEmpty&&r(),"next"!==this.continue&&t.currentPage.setPreference(this.continue)),e}afterAdd(e,t,r){if("after"===this.position||"both"===this.position){const e=r(!0);"next"!==this.continue&&e.setPreference(this.continue)}return e}}class pe extends U{constructor(e={}){super(e),q(e,{name:"RunningHeader",render:Q.func})}eachPage(e){if(!e.runningHeader){const t=L(".running-header");e.element.appendChild(t),e.runningHeader=t}e.runningHeader.innerHTML=this.render(e)}render(e){return e.number}}class ce extends U{constructor(e){super(e),q(e,{name:"Split",selector:Q.string,toNext:Q.string,fromPrevious:Q.string,didSplit:Q.func})}didSplit(e,t){this.toNext&&e.classList.add(this.toNext),this.fromPrevious&&t.classList.add(this.fromPrevious)}}var ge={Rule:U,Split(e){return new ce(e)},Counter(e){return new T(e)},FullBleedPage(e){return new J(e)},Footnote(e){return new te(e)},RunningHeader(e){return new pe(e)},Replace(e){return new ee(e)},FullBleedSpread(e){return new $(e)},PageBreak(e){return new se(e)},PageReference(e){return new le(e)},createRule(e){return new U(e)}};const{PageBreak:he,PageReference:me,Footnote:ue,FullBleedPage:fe,FullBleedSpread:be}=ge,we=(e,t)=>(e.textContent=`${t}`,e);var ke=[he({selector:"[book-page-break=\"both\"]",position:"both"}),he({selector:"[book-page-break=\"avoid\"]",position:"avoid"}),he({selector:"[book-page-break=\"after\"][book-page-continue=\"right\"]",position:"after",continue:"right"}),he({selector:"[book-page-break=\"after\"][book-page-continue=\"left\"]",position:"after",continue:"left"}),he({selector:"[book-page-break=\"after\"][book-page-continue=\"next\"]",position:"after",continue:"next"}),he({selector:"[book-page-break=\"before\"][book-page-continue=\"right\"]",position:"before",continue:"right"}),he({selector:"[book-page-break=\"before\"][book-page-continue=\"left\"]",position:"before",continue:"left"}),he({selector:"[book-page-break=\"before\"][book-page-continue=\"next\"]",position:"before",continue:"next"}),fe({selector:"[book-full-bleed=\"page\"]"}),be({selector:"[book-full-bleed=\"spread\"]"}),ue({selector:"[book-footnote-text]",render:(e,t)=>{const r=e.getAttribute("book-footnote-text");return`<i>${t}</i>${r}`}}),me({selector:"[book-pages-with-text]",replace:we,createTest:e=>{const t=e.getAttribute("book-pages-with-text").toLowerCase().trim();return e=>e.textContent.toLowerCase().includes(t)}}),me({selector:"[book-pages-with-selector]",replace:we,createTest:e=>{const t=e.getAttribute("book-pages-with-selector").trim();return e=>e.querySelector(t)}}),me({selector:"[book-pages-with]",replace:we,createTest:e=>{const t=e.textContent.toLowerCase().trim();return e=>{const r=e.textContent.toLowerCase();return r.includes(t)}}})];const ye=e=>{const t=document.createElement("div");return t.classList.add(e),t};class ve{constructor(e){this.element=e,this.content=ye("region-content"),this.content.style.padding="0.1px",this.content.style.position="relative",this.element.appendChild(this.content),this.path=[]}setPath(e){this.path=e,0<e.length&&this.content.appendChild(e[0])}get currentElement(){const e=this.path.length;return 0<e?this.path[e-1]:this.content}get isEmpty(){return""===this.content.textContent.trim()&&1>this.content.offsetHeight}get isReasonableSize(){const e=this.element.getBoundingClientRect();return 100<e.height&&100<e.width}overflowAmount(){const e=this.content.offsetHeight,t=this.element.offsetHeight;if(0===t)throw Error("Regionizer: Trying to flow into an element with zero height.");return e-t}hasOverflowed(){return-5<this.overflowAmount()}}const Pe=e=>e.nodeType===Node.TEXT_NODE,Ee=e=>e.nodeType===Node.ELEMENT_NODE,xe=e=>"SCRIPT"===e.tagName,Ce=e=>"IMG"===e.tagName,Se=e=>Ce(e)&&!e.naturalWidth,Le=e=>Ee(e)&&!xe(e),ze=()=>new Promise(e=>{requestAnimationFrame(r=>e(r))});let Te=0;const Re=()=>{const e=performance.now()-Te;return e>30},Oe=async()=>{Re()&&(Te=await ze())},Ae=e=>!!e.hasAttribute("data-ignore-overflow")||!!e.parentElement&&Ae(e.parentElement),Ne=document.createTextNode.bind(document),Be=async(e,t,r)=>{t.appendChild(e);const n=!r();return n||t.removeChild(e),await Oe(),n},Me=async(e,t,r)=>{const n=e.nodeValue;if(t.appendChild(e),!r()||Ae(t))return!0;let o=0;for(e.nodeValue=n.substr(0,o);!r()&&o<n.length;){for(o+=1;o<n.length&&" "!==n.charAt(o);)o+=1;o<n.length&&(e.nodeValue=n.substr(0,o),await Oe())}for(" "===n.charAt(o)&&(o-=1);" "!==n.charAt(o)&&0<o;)o-=1;if(1>o)return e.nodeValue=n,t.removeChild(e),!1;const a=n.substr(0,o),i=n.substr(o);e.nodeValue=a;const d=Ne(i);return d},Fe=async(e,t,r,n)=>{const o=await Me(e,t,n);if(Pe(o)){const e=r();return Fe(o,e,r,n)}return o},He=(e,t,r)=>{if(1>=e.path.length)throw Error("Regionize: Attempting to move the top-level element");const n=e.path.length,o=e.path.pop();let a=o;const i=[];for(;1<e.path.length&&!r(e.currentElement);)a=e.path.pop(),i.unshift(a);a.setAttribute("data-bindery-did-move",!0);const d=a.parentNode;d.removeChild(a),1<e.path.length&&""===e.currentElement.textContent.trim()&&(d.appendChild(a),a=e.path.pop(),i.unshift(a),a.parentNode.removeChild(a));let l;if(e.isEmpty?l=e:(e.hasOverflowed()&&(e.suppressErrors=!0),l=t()),l.currentElement.appendChild(a),i.forEach(e=>l.path.push(e)),l.path.push(o),n!==l.path.length)throw Error("Regionize: Restored path depth does not match original path depth")},Ie=(e,t)=>{const r=[],n=e=>{const r=e.cloneNode(!0);return t(e,r),r};for(let o=e.length-1;0<=o;o-=1){const a=e[o],i=a.cloneNode(!1),d=e[o+1];i.innerHTML="",t(a,i,d,n),o<e.length-1&&i.appendChild(r[o+1]),r[o]=i}return r},Ve=()=>new Promise(e=>{setTimeout(()=>{e()},10)}),je=async e=>{const t=performance.now();let r=!1;for(e.addEventListener("error",()=>{r=!0}),e.src=e.src;!e.naturalWidth&&!r;)await Ve();return performance.now()-t},De=(e,t,r)=>{let n=1;e.hasAttribute("start")&&(n=parseInt(e.getAttribute("start"),10)),r&&"LI"===r.tagName&&(n-=1);const o=e.children.length,a=n+o;t.setAttribute("start",a)},Ue=(e,t,r,n)=>{const o=[...e.children],a=o.indexOf(r);for(let d=0;d<a;d+=1){const e=n(o[d]);t.appendChild(e)}},qe=()=>{},We=()=>!0,_e=()=>!1,Ye=async e=>{const t=e.content,r=e.createRegion;if(!t)throw Error("content not specified");if(!r)throw Error("createRegion not specified");const n=e.applySplit||qe,o=e.canSplit||We,a=e.beforeAdd||qe,i=e.afterAdd||qe,d=e.didWaitFor||qe,l=e.shouldTraverse||_e;let s=r();const p=()=>s.hasOverflowed(),c=()=>o(s.currentElement),g=()=>Ae(s.currentElement),h=(e,t,r,o)=>{"OL"===e.tagName&&De(e,t,r),"TR"===e.tagName&&Ue(e,t,r,o),n(e,t,r,o)},m=()=>{const e=s;s=r();const t=Ie(e.path,h);return s.setPath(t),s},u=()=>(m(),s.currentElement),f=(e,t)=>{t.appendChild(e),!g()&&c()&&(s.suppressErrors=!0,m())},b=async e=>{const t=s.currentElement;let r=await Fe(e,t,u,p);!r&&1<s.path.length&&(He(s,m,o),r=await Fe(e,t,u,p)),r||f(e,s.currentElement)},w=async e=>{let t=await Be(e,s.currentElement,p);t||g()||(He(s,m,o),t=await Be(e,s.currentElement,p)),t||f(e,s.currentElement)},k=e=>{const t=e.querySelector("img");return!t&&!l(e)};let y;const v=async e=>{if(s.currentElement.appendChild(e),s.path.push(e),k(e)&&!p())return s.path.pop();const t=[...e.childNodes];e.innerHTML="",p()&&!g()&&c()&&He(s,m,o);const r=o(e)&&!Ae(e);for(const n of t)Pe(n)?await(r?b:w)(n):Le(n)&&(await y(n));return s.path.pop()};return y=async e=>{if(Se(e)){const t=await je(e);d(t)}a(e,m);const t=await v(e);i(t,m)},y(t)};class Ke{constructor(){this.flow=new ve(L("flow-box")),this.footer=L("footer"),this.background=L("page-background"),this.element=L("page",[this.background,this.flow.element,this.footer])}static isSizeValid(){const e=new Ke;return z(e.element,()=>e.flow.isReasonableSize)}setLeftRight(e){this.side=e,this.element.classList.toggle(C.leftPage,this.isLeft),this.element.classList.toggle(C.rightPage,!this.isLeft)}get isLeft(){return"left"===this.side}get isRight(){return"right"===this.side}setPreference(e){const t="left"===e;this.alwaysLeft=t,this.alwaysRight=!t}get suppressErrors(){return this.suppress||!1}set suppressErrors(e){this.suppress=e,this.element.classList.toggle(C.isOverflowing,e)}get isEmpty(){return!this.hasOutOfFlowContent&&this.flow.isEmpty}validate(){if(this.hasOverflowed()){const e=this.currentElement;e?(console.warn("Bindery: Content overflows, probably due to a style set on:",e),e.parentNode.removeChild(e)):console.warn("Bindery: Content overflows.")}}validateEnd(e){if(this.hasOverflowed()&&(console.warn(`Bindery: Page ~${this.number} is overflowing`,this.element),!this.suppressErrors&&!this.flow.suppressErrors&&!e))throw Error("Bindery: Moved to new page when last one is still overflowing")}hasOverflowed(){return z(this.element,()=>this.flow.hasOverflowed())}}const Ge=(e,t)=>{for(let r=t;r<e.length;r+=1){const t=e[r];if(!t.isOutOfFlow&&!t.avoidReorder)return r}return null},Xe=(e,t)=>{const r=e.slice();for(let n=0;n<r.length;n+=1){const e=r[n],o=0!=n%2;if(o&&e.alwaysRight||!o&&e.alwaysLeft)if(e.isOutOfFlow){const e=Ge(r,n+1);if(!e)break;const t=r[e];r.splice(e,1),r.splice(n,0,t)}else r.splice(n,0,t())}return r};class Qe{constructor(){this.rawPages=[],this.orderedPages=[]}addPage(e){this.rawPages.push(e),this.updatePageOrder()}get pageCount(){return this.orderedPages.length}get pages(){return this.orderedPages}updatePageOrder(){this.orderedPages=Xe(this.rawPages,()=>new Ke)}validate(){if(this.pageCount>2e3)throw Error("Bindery: Maximum page count exceeded. Suspected runaway layout.")}}const Ze=(e,t)=>{e.forEach((e,r)=>{e.number=t+r+1,e.setLeftRight(0==r%2?"right":"left")});const r={h1:"",h2:"",h3:"",h4:"",h5:"",h6:""};e.forEach(e=>{e.heading={},Object.keys(r).forEach((t,n)=>{const o=e.element.querySelector(t);o&&(r[t]=o.textContent,Object.keys(r).forEach((e,t)=>{t>n&&(r[e]="")})),""!==r[t]&&(e.heading[t]=r[t])})})},$e=e=>e instanceof $,Je=e=>e instanceof J,et=e=>e instanceof se,tt=e=>$e(e)||Je(e)||et(e),rt=e=>{const t=e.filter(tt),r=e.filter(e=>!t.includes(e)),n=t.find($e),o=t.find(Je);return n?r.push(n):o?r.push(o):r.push(...t),r},nt=(e,t,r)=>{let n=e;const o=e.parentNode;o.removeChild(n);let a;t.currentPage.hasOverflowed()&&(o.appendChild(e),n=o,n.parentNode.removeChild(n),a=t.currentPage.flow.path.pop(),t.currentPage.hasOverflowed()&&console.error("Trying again didnt fix it"));const i=r();i.currentElement.appendChild(n),a&&i.path.push(a)},ot=(e,t)=>{console.warn(`Couldn't apply ${e.name}, caused overflows twice when adding: `,t)};class at{constructor(e){const t=e.find(e=>e.pageNumberOffset);this.pageNumberOffset=t?t.pageNumberOffset:0,this.pageRules=e.filter(e=>e.eachPage),this.beforeAddRules=e.filter(e=>e.selector&&e.beforeAdd),this.afterAddRules=e.filter(e=>e.selector&&e.afterAdd),this.selectorsNotToSplit=e.filter(e=>e.avoidSplit).map(e=>e.selector),this.didSplitRules=e.filter(e=>e.selector&&e.didSplit),e.filter(e=>e.setup).forEach(e=>e.setup()),this.applySplitRules=this.applySplitRules.bind(this);const r=e.map(e=>e.selector).filter(e=>!!e).join(", ");if(r){this.shouldTraverse=(e=>e.querySelector(r)).bind(this)}else this.shouldTraverse=()=>!1}applySplitRules(e,t,r,n){e.classList.add(C.toNext),t.classList.add(C.fromPrev),this.didSplitRules.filter(t=>e.matches(t.selector)).forEach(o=>{o.didSplit(e,t,r,n)})}applyPageDoneRules(e,t){this.pageRules.forEach(r=>r.eachPage(e,t))}finishEveryPage(e){this.pageRules.forEach(t=>e.pages.forEach(r=>t.eachPage(r,e)))}applyBeforeAddRules(e,t,r,n){let o=e;const a=this.beforeAddRules.filter(e=>o.matches(e.selector));return a.forEach(e=>{o=e.beforeAdd(o,t,r,n)}),o}applyAfterAddRules(e,t,r,n){let o=e;const a=e=>nt(e,t,r),i=this.afterAddRules.filter(e=>o.matches(e.selector)),d=rt(i);return d.forEach(e=>{o=e.afterAdd(o,t,r,n,o=>(a(o),e.afterAdd(o,t,r,n,()=>ot(e,o))))}),o}}const it=e=>(e/1e3).toFixed(2),dt=e=>{const t=window.performance.now(),r=e.querySelectorAll("*").length;let n=0,o=0;return{increment:()=>{o+=1},addWaitTime:e=>{n+=e},get progress(){return o/r},end:()=>{const e=window.performance.now(),r=e-t-n;console.log(`ðŸ“– Layout ready in ${it(r)}s (plus ${it(n)}s waiting for images)`)}}},lt=async(e,t,r)=>{if(!Ke.isSizeValid())throw Error("Page is too small");const n=dt(e),o=new at(t),a=new Qe,i=o.pageNumberOffset,d=()=>new Ke,l=(e,t)=>{a.updatePageOrder(),Ze(a.pages,i),o.applyPageDoneRules(e,a),e.validateEnd(t),a.validate()},s=(e=!1)=>{const t=a.currentPage;t&&l(t,e);const o=d();return a.currentPage=o,a.addPage(o),r(a,n.progress),o.validate(),o},p=o.applySplitRules,c=o.selectorsNotToSplit,g=e=>!c.some(t=>e.matches(t))&&(!e.parentElement||g(e.parentElement));return e.style.margin=0,e.style.padding=0,await Ye({content:e,createRegion:()=>{const e=s();return e.flow},applySplit:p,canSplit:g,beforeAdd:(e,t)=>{o.applyBeforeAddRules(e,a,t,d)},afterAdd:(e,t)=>(n.increment(),o.applyAfterAddRules(e,a,t,d)),shouldTraverse:o.shouldTraverse,didWaitFor:e=>n.addWaitTime(e)}),a.updatePageOrder(),Ze(a.pages,i),o.finishEveryPage(a),n.end(),a},st=(e,t)=>{if(0!=e.length%2){const r=t();e.push(r)}const r=t(),n=t();return r.element.style.visibility="hidden",n.element.style.visibility="hidden",e.unshift(r),e.push(n),e},pt=e=>L(".spread-wrapper.spread-centered.spread-size",e),ct=e=>L(".spread-wrapper.spread-centered.page-size",e),gt=(e,t)=>{const r=t?st(e,()=>new Ke):e,n=document.createDocumentFragment();if(t)for(let e=0;e<r.length;e+=2){const t=pt([r[e].element,r[e+1].element]);n.appendChild(t)}else r.forEach(e=>{const t=ct([e.element]);n.appendChild(t)});return n},ht=["top","bottom","left","right"],mt=()=>ht.map(e=>L(`.mark-bleed-${e}`)),ut=()=>ht.map(e=>L(`.mark-crop-${e}`)),ft=()=>L(".page-size.print-mark-wrap",[...ut(),...mt()]),bt=()=>L(".spread-size.print-mark-wrap",[L(".mark-crop-fold"),...ut(),...mt()]),wt=(e,t)=>{const r=parseInt((e+1)/4,10)+1;return L(".print-meta",`Sheet ${r} of ${t/4}: ${0==e%4?"Outside":"Inside"}`)},kt=(e,t)=>{for(;0!=e.length%4;){const r=t();r.element.style.visibility="hidden",e.push(r)}const r=[],n=e.length;for(let o=0;o<n/2;o+=2)r.push(e[n-1-o]),r.push(e[o]),r.push(e[o+1]),r.push(e[n-2-o]);return r},yt=e=>L(".spread-wrapper",e),vt=e=>L(".spread-wrapper",e),Pt=(e,t,r)=>{const n=r!==b,o=r===k;let a=e;r===w?a=st(a,()=>new Ke):o&&(a=kt(a,()=>new Ke));const d=document.createDocumentFragment(),l=n?bt:ft,s=n?yt:vt,p=e=>L("print-sheet",[s(e)]);if(n)for(let e=0;e<a.length;e+=2){const t=l();if(o){const r=wt(e,a.length);t.appendChild(r)}const r=p([L(".page-bleed-clip.page-bleed-clip-left",[a[e].element]),L(".page-bleed-clip.page-bleed-clip-right",[a[e+1].element]),t]);r.classList.add(C.sheetSpread),d.appendChild(r)}else a.forEach(e=>{const t=p([e.element,l()]);t.classList.add(e.isLeft?C.sheetLeft:C.sheetRight),d.appendChild(t)});return d},Et=(e,t)=>{const r=st(e,()=>new Ke),n=document.createDocumentFragment(),o=L(".spread-size.flip-sizer"),a=L(".spread-size.flap-holder");o.appendChild(a),n.appendChild(o);const d=[];let l=-1,s=4;60<r.length*s&&(s=60/r.length),a.style.width=`${r.length*s}px`;const p=e=>{let t=e;t===l&&(t+=1),l=t;let r=4;200<d.length*r&&(r=200/d.length),d.forEach((e,n,o)=>{var a=Math.abs;const i=(o.length-a(n-t+.5))*r;e.style.transform=`translate3d(${n<t?4:0}px,0,${i}px) rotateY(${n<t?-180:0}deg)`})};let c=0;for(let n=1;n<r.length-1;n+=t?2:1){c+=1;const e=c,o=L(".page3d");o.addEventListener("click",()=>{p(e-1)});const i=r[n].element;let l;i.classList.add(B("page3d-front")),o.appendChild(i),t?(o.classList.add(B("doubleSided")),l=r[n+1].element):l=L(".page"),l.classList.add(B("page3d-back")),o.appendChild(l),o.style.left=`${n*s}px`,d.push(o),a.appendChild(o)}return p(0),n},xt=t=>(t.ctrlKey||t.metaKey)&&80===t.keyCode,Ct=t=>{if(window.matchMedia){const e=window.matchMedia("print");e.addListener(e=>{e.matches&&t()})}document.body.addEventListener("keydown",r=>{xt(r)&&(r.preventDefault(),t(),setTimeout(()=>window.print(),200))})},St=(()=>{let e,t=!1;const r=n=>t?void(e=n):void(t=!0,n(),requestAnimationFrame(()=>{if(t=!1,e){const t=e;e=null,r(t)}}));return r})(),Lt=ae(100),zt=ae(50),Tt=window.document;class Rt{constructor({pageSetup:e,mode:t,layout:r,marks:n,ControlsComponent:o}){this.book=null,this.pageSetup=e,this.progressBar=L("progress-bar"),this.content=L("zoom-content"),this.scaler=L("zoom-scaler",[this.content]),this.element=L("root",[this.progressBar,this.scaler]),this.doubleSided=!0,this.layout=r,this.setMarks(n),this.mode=t,this.element.classList.add(C.viewPreview),this.currentLeaf=0,Ct(()=>{this.mode=u,this.render()}),window.addEventListener("resize",()=>{zt(()=>this.scaleToFit())}),o&&(this.controls=new o({Mode:f,Paper:h,Layout:y,Marks:x},{paper:this.pageSetup.paper,layout:this.layout,mode:this.mode,marks:n},{setMode:this.setMode.bind(this),setPaper:this.setSheetSize.bind(this),setLayout:this.setLayout.bind(this),setMarks:this.setMarks.bind(this),getPageSize:()=>this.pageSetup.displaySize}),this.element.appendChild(this.controls.element)),this.inProgress=!0,this.show()}setMode(e){const t=parseInt(e,10);t===this.mode||(this.mode=t,this.render())}get inProgress(){return this.element.classList.contains(C.inProgress)}set inProgress(e){this.element.classList.toggle(C.inProgress,e),e&&this.controls&&this.controls.setInProgress()}get isTwoUp(){return this.layout!==b}get isShowingCropMarks(){return this.element.classList.contains(C.showCrop)}set isShowingCropMarks(e){this.element.classList.toggle(C.showCrop,e)}get isShowingBleedMarks(){return this.element.classList.contains(C.showBleedMarks)}set isShowingBleedMarks(e){this.element.classList.toggle(C.showBleedMarks,e)}get isShowingBleed(){return this.element.classList.contains(C.showBleed)}set isShowingBleed(e){this.element.classList.toggle(C.showBleed,e)}get isViewing(){return Tt.body.classList.contains(C.isViewing)}set isViewing(e){Tt.body.classList.toggle(C.isViewing,e)}setSheetSize(e){const t=parseInt(e,10);this.pageSetup.paper=t,this.pageSetup.updateStyleVars(),this.mode=u,this.render(),this.scaleToFit(),setTimeout(()=>{this.scaleToFit()},300)}setLayout(e){const t=parseInt(e,10);t===this.layout||(this.layout=t,this.pageSetup.printTwoUp=this.isTwoUp,this.pageSetup.updateStyleVars(),this.mode=u,this.render())}setMarks(e){const t=parseInt(e,10);this.isShowingCropMarks=t===v||t===E,this.isShowingBleedMarks=t===P||t===E}displayError(t,r){if(this.show(),!this.error&&(this.error=e(t,r),this.element.appendChild(this.error),this.scrollToBottom(),this.book)){const e=this.book.currentPage.flow;e&&(e.currentElement.style.outline="3px solid red")}}scrollToBottom(){const e=Tt.scrollingElement;if(e){const t=e.scrollHeight-e.offsetHeight;e.scrollTop=t}}clear(){this.book=null,this.lastSpreadInProgress=null,this.content.innerHTML=""}show(){this.element.parentNode||(Tt.body.appendChild(this.element),this.isViewing=!0)}hide(){this.element.parentNode&&(this.element.parentNode.removeChild(this.element),this.isViewing=!1)}render(e){if(e&&(this.book=e),!this.book)return;this.show(),this.element.classList.remove(...C.allModes),this.element.classList.add(C[this.mode]),this.isShowingBleed=this.mode===u;const t=this.scrollPercent;this.controls&&this.controls.setDone(this.book.pages.length),this.progress=1,window.requestAnimationFrame(()=>{const e=this.book.pages.slice(),r=this.viewFor(this.mode)(e,this.doubleSided,this.layout);this.content.innerHTML="",this.content.appendChild(r),this.hasRendered?this.scrollPercent=t:this.hasRendered=!0,this.scaleToFit()})}viewFor(e){if(e===m)return gt;if(e===1)return Et;if(e===u)return Pt;throw Error(`Invalid layout mode: ${this.mode} (type ${typeof this.mode})`)}set progress(e){1>e?St(()=>{this.progressBar.style.transform=`scaleX(${e})`}):this.progressBar.style.transform=""}updateProgress(e,t){if(this.book=e,this.progress=t,!Tt||!Tt.scrollingElement)return;const r=Tt.scrollingElement.scrollTop,n=Tt.scrollingElement.scrollHeight,o=Tt.scrollingElement.offsetHeight;n>3*o&&r<o||Lt(()=>this.renderProgress(e,t))}renderProgress(e,t){const r=!this.content.firstElementChild;this.controls&&this.controls.updateProgress(e.pageCount,t);const n=this.mode===m||this.mode===u&&this.layout!==b,o=n?2:1,a=e=>L(".spread-wrapper.spread-centered.spread-size",e);e.pages.forEach((e,t)=>{if(!(this.content.contains(e.element)&&e.element.parentNode!==this.content)){if(this.lastSpreadInProgress&&this.lastSpreadInProgress.children.length<o)return void this.lastSpreadInProgress.appendChild(e.element);if(this.lastSpreadInProgress=a([e.element]),0===t&&n){const e=new Ke;e.element.style.visibility="hidden",this.lastSpreadInProgress.insertBefore(e.element,this.lastSpreadInProgress.firstElementChild)}this.content.appendChild(this.lastSpreadInProgress)}}),r&&this.scaleToFit()}scaleToFit(){if(this.content.firstElementChild){const e=this.scrollPercent;this.scaler.style.transform=`scale(${this.scaleThatFits})`,this.scrollPercent=e}}get scaleThatFits(){var e=Math.min;const t=this.scaler.getBoundingClientRect().width,r=this.content.getBoundingClientRect().width;return e(1,t/r)}get scrollPercent(){if(!Tt||!Tt.scrollingElement)return 0;const e=Tt.scrollingElement;return e.scrollTop/e.scrollHeight}set scrollPercent(e){if(Tt&&Tt.scrollingElement){const t=Tt.scrollingElement;t.scrollTop=t.scrollHeight*e}}}const Ot=e=>Object.keys(e).map(t=>e[t]),At=()=>new Promise(e=>{requestAnimationFrame(r=>e(r))});class Nt{constructor(e={}){if(console.log(`ðŸ“– Bindery ${t}`),!e.content)throw this.viewer.displayError("Content not specified","You must include a source element, selector, or url"),Error("Bindery: You must include a source element or selector");this.autorun=e.autorun||!0,this.autoupdate=e.autoupdate||!1,q(e,{name:"makeBook",autorun:Q.bool,content:Q.any,ControlsComponent:Q.func,view:Q.enum(...Ot(f)),pageNumberOffset:Q.number,pageSetup:Q.shape({name:"pageSetup",margin:Q.margin,size:Q.size}),printSetup:Q.shape({name:"printSetup",bleed:Q.length,layout:Q.enum(...Ot(y)),marks:Q.enum(...Ot(x)),paper:Q.enum(...Ot(h))}),rules:Q.array}),this.pageSetup=new D(e.pageSetup,e.printSetup);const r=e.printSetup?e.printSetup.layout||b:b,n=e.printSetup?e.printSetup.marks||v:v,o=e.ControlsComponent||window.BinderyControls;this.viewer=new Rt({pageSetup:this.pageSetup,mode:e.view||m,marks:n,layout:r,ControlsComponent:o}),this.rules=ke,this.rules.push({pageNumberOffset:e.pageNumberOffset||0}),e.rules&&this.addRules(e.rules),this.getContentAsElement(e.content).then(e=>{this.content=e,e&&this.autorun&&this.makeBook()})}static makeBook(e={}){return e.autorun=!e.autorun||e.autorun,new Nt(e)}async getContentAsElement(e){if(e instanceof HTMLElement)return e;if("string"==typeof e){const t=document.querySelector(e);return t instanceof HTMLElement||(this.viewer.displayError("Content not specified",`Could not find element that matches selector "${e}"`),console.error(`Bindery: Could not find element that matches selector "${e}"`)),t}if("object"==typeof e&&e.url)return this.fetchContent(e.url,e.selector);throw Error("Bindery: Source must be an element or selector")}async fetchContent(e,t){const r=await fetch(e);if(200!==r.status)throw this.viewer.displayError(r.status,`Could not find file at "${e}"`),Error(`Bindery: Could not find file at "${e}"`);const n=await r.text(),o=N(n,t);if(!(o instanceof HTMLElement))throw this.viewer.displayError("Source not specified",`Could not find element that matches selector "${t}"`),Error(`Bindery: Could not find element that matches selector "${t}"`);return o}cancel(){this.viewer.hide(),this.content&&(this.content.style.display="")}addRules(e){e.forEach(e=>{if(e instanceof ge.Rule)this.rules.push(e);else throw Error(`Bindery: The following is not an instance of Bindery.Rule and will be ignored: ${e}`)})}async makeBook(){if(!this.content)return this.viewer.show(),console.error("No content"),null;this.content.style.display="";const e=this.content.cloneNode(!0);this.content.style.display="none",this.layoutInProgress=!0,this.viewer.clear(),this.viewer.show(),this.pageSetup.updateStyleVars(),this.viewer.inProgress=!0;try{const t=await lt(e,this.rules,(e,t)=>this.viewer.updateProgress(e,t));return this.viewer.progress=1,this.layoutInProgress=!1,await At(),this.viewer.render(t),this.viewer.inProgress=!1,t}catch(t){return this.layoutInProgress=!1,this.viewer.inProgress=!1,this.viewer.displayError("Layout couldn't complete",t.message),console.error(t),null}}}(function(e){if(e&&"undefined"!=typeof window){var t=document.createElement("style");return t.setAttribute("type","text/css"),t.innerHTML=e,document.head.appendChild(t),e}})(".\uD83D\uDCD6-page{width:var(--bindery-page-width);height:var(--bindery-page-height);position:relative;display:flex;flex-direction:column;flex-wrap:nowrap}.\uD83D\uDCD6-continuation{text-indent:unset!important;list-style:none!important}.\uD83D\uDCD6-flow-box{position:relative;margin-top:var(--bindery-margin-top);flex:1 1 auto;min-height:0}.\uD83D\uDCD6-footer{margin-top:8pt;margin-bottom:var(--bindery-margin-bottom);flex:0 1 auto;z-index:2}.\uD83D\uDCD6-flow-box,.\uD83D\uDCD6-footer{margin-left:var(--bindery-margin-inner);margin-right:var(--bindery-margin-outer)}.\uD83D\uDCD6-left .\uD83D\uDCD6-flow-box,.\uD83D\uDCD6-left .\uD83D\uDCD6-footer{margin-left:var(--bindery-margin-outer);margin-right:var(--bindery-margin-inner)}.\uD83D\uDCD6-page-background{position:absolute;z-index:0;overflow:hidden;top:calc(-1*var(--bindery-bleed));bottom:calc(-1*var(--bindery-bleed));left:calc(-1*var(--bindery-bleed));right:calc(-1*var(--bindery-bleed))}.\uD83D\uDCD6-left>.\uD83D\uDCD6-page-background{right:0}.\uD83D\uDCD6-right>.\uD83D\uDCD6-page-background{left:0}.\uD83D\uDCD6-sup{font-size:.667em}.\uD83D\uDCD6-footer,.\uD83D\uDCD6-running-header{font-size:10pt}.\uD83D\uDCD6-running-header{position:absolute;text-align:center;top:.25in}.\uD83D\uDCD6-left .\uD83D\uDCD6-running-header{text-align:left;left:var(--bindery-margin-outer)}.\uD83D\uDCD6-right .\uD83D\uDCD6-running-header{right:var(--bindery-margin-outer);text-align:right}.\uD83D\uDCD6-page-size-rotated{height:var(--bindery-page-width);width:var(--bindery-page-height)}.\uD83D\uDCD6-spread-size{height:var(--bindery-page-height);width:calc(var(--bindery-page-width)*2)}.\uD83D\uDCD6-spread-size-rotated{width:var(--bindery-page-height);height:calc(var(--bindery-page-width)*2)}.\uD83D\uDCD6-spread.\uD83D\uDCD6-right>.\uD83D\uDCD6-page-background{left:calc(-100% - var(--bindery-bleed))}.\uD83D\uDCD6-spread.\uD83D\uDCD6-left>.\uD83D\uDCD6-page-background{right:calc(-100% - var(--bindery-bleed))}.\uD83D\uDCD6-left .\uD83D\uDCD6-rotate-container.\uD83D\uDCD6-rotate-outward,.\uD83D\uDCD6-left .\uD83D\uDCD6-rotate-container.\uD83D\uDCD6-rotate-spread-clockwise,.\uD83D\uDCD6-right .\uD83D\uDCD6-rotate-container.\uD83D\uDCD6-rotate-inward,.\uD83D\uDCD6-rotate-container.\uD83D\uDCD6-rotate-clockwise{transform:rotate(90deg) translate3d(0,-100%,0);transform-origin:top left}.\uD83D\uDCD6-left .\uD83D\uDCD6-rotate-container.\uD83D\uDCD6-rotate-inward,.\uD83D\uDCD6-left .\uD83D\uDCD6-rotate-container.\uD83D\uDCD6-rotate-spread-counterclockwise,.\uD83D\uDCD6-right .\uD83D\uDCD6-rotate-container.\uD83D\uDCD6-rotate-outward,.\uD83D\uDCD6-rotate-container.\uD83D\uDCD6-rotate-counterclockwise{transform:rotate(-90deg) translate3d(-100%,0,0);transform-origin:top left}.\uD83D\uDCD6-rotate-container{position:absolute}.\uD83D\uDCD6-left .\uD83D\uDCD6-rotate-container.\uD83D\uDCD6-rotate-clockwise .\uD83D\uDCD6-page-background{top:0}.\uD83D\uDCD6-left .\uD83D\uDCD6-rotate-container.\uD83D\uDCD6-rotate-counterclockwise .\uD83D\uDCD6-page-background,.\uD83D\uDCD6-right .\uD83D\uDCD6-rotate-container.\uD83D\uDCD6-rotate-clockwise .\uD83D\uDCD6-page-background{bottom:0}.\uD83D\uDCD6-right .\uD83D\uDCD6-rotate-container.\uD83D\uDCD6-rotate-counterclockwise .\uD83D\uDCD6-page-background{top:0}.\uD83D\uDCD6-rotate-container.\uD83D\uDCD6-rotate-inward .\uD83D\uDCD6-page-background{bottom:0}.\uD83D\uDCD6-rotate-container.\uD83D\uDCD6-rotate-outward .\uD83D\uDCD6-page-background{top:0}.\uD83D\uDCD6-right .\uD83D\uDCD6-rotate-container.\uD83D\uDCD6-rotate-spread-clockwise{transform:rotate(90deg) translate3d(0,-50%,0);transform-origin:top left}.\uD83D\uDCD6-right .\uD83D\uDCD6-rotate-container.\uD83D\uDCD6-rotate-spread-counterclockwise{transform:rotate(-90deg) translate3d(-100%,-50%,0);transform-origin:top left}:root{--bindery-ui-bg:#f4f4f4;--bindery-ui-accent:#000;--bindery-ui-text:#000}@media screen{.\uD83D\uDCD6-root{transition:opacity .2s;opacity:1;background:var(--bindery-ui-bg);z-index:99;position:relative;padding-top:40px;min-height:100vh}.\uD83D\uDCD6-view-flip .\uD83D\uDCD6-root{padding-top:0}.\uD83D\uDCD6-progress-bar{transform-origin:top left;transform:scaleY(0);position:fixed;left:0;top:0;right:0;background:var(--bindery-ui-accent);transition:transform .2s;height:2px;z-index:99}.\uD83D\uDCD6-in-progress .\uD83D\uDCD6-progress-bar{transform:scaleX(0)}.\uD83D\uDCD6-zoom-content{padding:10px;background:var(--bindery-ui-bg);position:absolute;left:0;right:0;margin:auto}.\uD83D\uDCD6-view-preview .\uD83D\uDCD6-zoom-content{min-width:calc(20px + var(--bindery-spread-width))}.\uD83D\uDCD6-view-flip .\uD83D\uDCD6-zoom-content{min-width:calc(1.1*var(--bindery-spread-width))}.\uD83D\uDCD6-view-print .\uD83D\uDCD6-zoom-content{min-width:calc(20px + var(--bindery-sheet-width))}.\uD83D\uDCD6-zoom-content>.\uD83D\uDCD6-page{margin:auto}.\uD83D\uDCD6-measure-area{position:fixed;padding:50px 20px;z-index:99;visibility:hidden;top:0;left:0;width:0;height:0;overflow:hidden}.\uD83D\uDCD6-is-overflowing{border-bottom:1px solid #f0f}.\uD83D\uDCD6-print-sheet{margin:0 auto}.\uD83D\uDCD6-error{font:16px/1.4 -apple-system,BlinkMacSystemFont,Roboto,sans-serif;padding:15vh 15vw;z-index:999;position:fixed;top:0;left:0;right:0;bottom:0;background:hsla(0,0%,95.7%,.7)}.\uD83D\uDCD6-error-title{font-size:1.5em;margin-bottom:16px}.\uD83D\uDCD6-error-text{margin-bottom:16px;white-space:pre-line}.\uD83D\uDCD6-error-footer{opacity:.5;font-size:.66em;text-transform:uppercase;letter-spacing:.02em}.\uD83D\uDCD6-show-bleed .\uD83D\uDCD6-print-sheet{background:#fff;outline:1px solid rgba(0,0,0,.1);box-shadow:0 1px 3px rgba(0,0,0,.2);margin:20px auto}}@media screen{.\uD83D\uDCD6-page{background:#fff;box-shadow:0 0 0 .5px rgba(0,0,0,.3);overflow:hidden}.\uD83D\uDCD6-show-bleed .\uD83D\uDCD6-page{box-shadow:none;overflow:visible}.\uD83D\uDCD6-show-bleed .\uD83D\uDCD6-page:after{content:\"\";outline:1px dotted rgba(0,255,255,.7);position:absolute;left:0;right:0;bottom:0;top:0;z-index:99}.\uD83D\uDCD6-placeholder-num{visibility:hidden!important}}.\uD83D\uDCD6-print-sheet{width:var(--bindery-sheet-width);height:var(--bindery-sheet-height)}.\uD83D\uDCD6-page-bleed-clip{overflow:hidden}.\uD83D\uDCD6-page-bleed-clip-left{padding-left:calc(var(--bindery-bleed) + 12pt)}.\uD83D\uDCD6-page-bleed-clip-right{padding-right:calc(var(--bindery-bleed) + 12pt)}.\uD83D\uDCD6-show-bleed-marks .\uD83D\uDCD6-print-sheet .\uD83D\uDCD6-page-bleed-clip,.\uD83D\uDCD6-show-crop .\uD83D\uDCD6-print-sheet .\uD83D\uDCD6-page-bleed-clip{padding-top:calc(var(--bindery-bleed) + 12pt);padding-bottom:calc(var(--bindery-bleed) + 12pt)}.\uD83D\uDCD6-print-sheet-spread .\uD83D\uDCD6-spread-wrapper{margin-left:auto;margin-right:auto}.\uD83D\uDCD6-viewing{margin:0}.\uD83D\uDCD6-zoom-scaler{transform-origin:top left;transform-style:preserve-3d;height:calc(100vh - 120px)}.\uD83D\uDCD6-print-sheet{position:relative;overflow:hidden;display:flex;align-items:center;justify-content:center;transition:all .2s}.\uD83D\uDCD6-print-sheet-left{justify-content:left}.\uD83D\uDCD6-print-sheet-right{justify-content:right}.\uD83D\uDCD6-spread-wrapper{position:relative;display:flex;justify-content:center;margin:auto}.\uD83D\uDCD6-spread-centered{margin:0 auto 32px}@page{margin:0}@media print{.\uD83D\uDCD6-root *{-webkit-print-color-adjust:exact;color-adjust:exact}.\uD83D\uDCD6-controls{display:none!important}.\uD83D\uDCD6-print-sheet{contain:layout;margin:0 auto;page-break-after:always}.\uD83D\uDCD6-zoom-scaler[style]{transform:none!important}}.\uD83D\uDCD6-print-mark-wrap{display:none;position:absolute;pointer-events:none;top:0;bottom:0;left:0;right:0;z-index:999;margin:auto}.\uD83D\uDCD6-show-bleed-marks .\uD83D\uDCD6-print-mark-wrap,.\uD83D\uDCD6-show-crop .\uD83D\uDCD6-print-mark-wrap{display:block}.\uD83D\uDCD6-show-crop .\uD83D\uDCD6-print-mark-wrap>[class*=crop]{display:block}.\uD83D\uDCD6-show-bleed-marks .\uD83D\uDCD6-print-mark-wrap>[class*=bleed]{display:block}.\uD83D\uDCD6-print-mark-wrap>div{display:none;position:absolute;overflow:hidden}.\uD83D\uDCD6-print-mark-wrap>div:after,.\uD83D\uDCD6-print-mark-wrap>div:before{content:\"\";display:block;position:absolute}.\uD83D\uDCD6-print-mark-wrap>div:before{top:0;left:0}.\uD83D\uDCD6-print-mark-wrap>div:after{bottom:0;right:0}.\uD83D\uDCD6-mark-bleed-left,.\uD83D\uDCD6-mark-bleed-right,.\uD83D\uDCD6-mark-crop-fold,.\uD83D\uDCD6-mark-crop-left,.\uD83D\uDCD6-mark-crop-right{width:1px;margin:auto}.\uD83D\uDCD6-mark-bleed-left:after,.\uD83D\uDCD6-mark-bleed-left:before,.\uD83D\uDCD6-mark-bleed-right:after,.\uD83D\uDCD6-mark-bleed-right:before,.\uD83D\uDCD6-mark-crop-fold:after,.\uD83D\uDCD6-mark-crop-fold:before,.\uD83D\uDCD6-mark-crop-left:after,.\uD83D\uDCD6-mark-crop-left:before,.\uD83D\uDCD6-mark-crop-right:after,.\uD83D\uDCD6-mark-crop-right:before{width:1px;height:var(--bindery-mark-length);background-image:linear-gradient(90deg,#000 0,#000 51%,transparent 0);background-size:1px 100%}.\uD83D\uDCD6-mark-bleed-bottom,.\uD83D\uDCD6-mark-bleed-top,.\uD83D\uDCD6-mark-crop-bottom,.\uD83D\uDCD6-mark-crop-top{height:1px}.\uD83D\uDCD6-mark-bleed-bottom:after,.\uD83D\uDCD6-mark-bleed-bottom:before,.\uD83D\uDCD6-mark-bleed-top:after,.\uD83D\uDCD6-mark-bleed-top:before,.\uD83D\uDCD6-mark-crop-bottom:after,.\uD83D\uDCD6-mark-crop-bottom:before,.\uD83D\uDCD6-mark-crop-top:after,.\uD83D\uDCD6-mark-crop-top:before{width:var(--bindery-mark-length);height:1px;background-image:linear-gradient(180deg,#000 0,#000 51%,transparent 0);background-size:100% 1px}.\uD83D\uDCD6-mark-crop-fold{right:0;left:0}.\uD83D\uDCD6-mark-crop-left{left:0}.\uD83D\uDCD6-mark-crop-right{right:0}.\uD83D\uDCD6-mark-crop-top{top:0}.\uD83D\uDCD6-mark-crop-bottom{bottom:0}.\uD83D\uDCD6-print-meta{padding:var(--bindery-mark-length);text-align:center;font-family:-apple-system,BlinkMacSystemFont,Roboto,sans-serif;font-size:8pt;display:block!important;position:absolute;bottom:-60pt;left:0;right:0}.\uD83D\uDCD6-mark-bleed-left,.\uD83D\uDCD6-mark-bleed-right,.\uD83D\uDCD6-mark-crop-fold,.\uD83D\uDCD6-mark-crop-left,.\uD83D\uDCD6-mark-crop-right{top:calc(-1*var(--bindery-mark-length) - var(--bindery-bleed));bottom:calc(-1*var(--bindery-mark-length) - var(--bindery-bleed))}.\uD83D\uDCD6-mark-bleed-bottom,.\uD83D\uDCD6-mark-bleed-top,.\uD83D\uDCD6-mark-crop-bottom,.\uD83D\uDCD6-mark-crop-top{left:calc(-12pt - var(--bindery-bleed));right:calc(-12pt - var(--bindery-bleed))}.\uD83D\uDCD6-mark-bleed-left{left:calc(-1*var(--bindery-bleed))}.\uD83D\uDCD6-mark-bleed-right{right:calc(-1*var(--bindery-bleed))}.\uD83D\uDCD6-mark-bleed-top{top:calc(-1*var(--bindery-bleed))}.\uD83D\uDCD6-mark-bleed-bottom{bottom:calc(-1*var(--bindery-bleed))}.\uD83D\uDCD6-view-flip .\uD83D\uDCD6-zoom-scaler{transform-origin:center left}.\uD83D\uDCD6-flap-holder{perspective:5000px;position:absolute;top:0;right:0;left:0;bottom:0;margin:auto;transform-style:preserve-3d}.\uD83D\uDCD6-flip-sizer{position:relative;margin:auto;padding:0 20px;box-sizing:content-box;height:90vh!important}.\uD83D\uDCD6-page3d{margin:auto;width:var(--bindery-page-width);height:var(--bindery-page-height);transform:rotateY(0);transform-style:preserve-3d;transform-origin:left;transition:transform .5s,box-shadow .1s;position:absolute;left:0;right:0;top:0;bottom:0}.\uD83D\uDCD6-page3d:hover{box-shadow:2px 0 4px rgba(0,0,0,.2)}.\uD83D\uDCD6-page3d.\uD83D\uDCD6-flipped{transform:rotateY(-180deg)}.\uD83D\uDCD6-page3d .\uD83D\uDCD6-page{position:absolute;backface-visibility:hidden;-webkit-backface-visibility:hidden;box-shadow:0 0 2px rgba(0,0,0,.1)}.\uD83D\uDCD6-page3d .\uD83D\uDCD6-page3d-front{transform:rotateY(0)}.\uD83D\uDCD6-page3d .\uD83D\uDCD6-page3d-back{transform:rotateY(-180deg)}");const Bt=Object.assign(Nt,ge);return Bt.View=f,Bt.Paper=h,Bt.Layout=y,Bt.Marks=x,Bt.version="v2.2.7",Bt}();
//# sourceMappingURL=bindery.min.js.map
